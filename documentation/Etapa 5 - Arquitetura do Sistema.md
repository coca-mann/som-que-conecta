# **Etapa 5 - Arquitetura do Sistema**

## **üìå Estrutura do Banco de Dados**

## **1Ô∏è‚É£ Tabela `user_types`** (Tipos de Usu√°rio)
Esta tabela armazena os diferentes tipos de usu√°rios do sistema.

| Coluna        | Tipo           | Permite NULL? | Descri√ß√£o |
|--------------|---------------|--------------|-----------|
| `id`        | `UUID` (PK)    | ‚ùå N√£o | Identificador √∫nico |
| `name`      | `VARCHAR(50)`  | ‚ùå N√£o | Nome do tipo de usu√°rio (Ex: "Aluno", "Tutor", "ONG") |
| `description` | `TEXT` (opcional) | ‚úÖ Sim | Descri√ß√£o detalhada do tipo de usu√°rio |
| `created_at` | `TIMESTAMP`    | ‚ùå N√£o | Data de cria√ß√£o |

---

## **2Ô∏è‚É£ Tabela `users`** (Usu√°rios)
Tabela que armazena os dados dos usu√°rios do sistema.

| Coluna          | Tipo           | Permite NULL? | Permite Branco? | Descri√ß√£o |
|----------------|---------------|--------------|----------------|-----------|
| `id`          | `UUID` (PK)    | ‚ùå N√£o | - | Identificador √∫nico |
| `username`    | `VARCHAR(150)` | ‚ùå N√£o | ‚ùå N√£o | Nome de usu√°rio (padr√£o: e-mail para alunos) |
| `email`       | `VARCHAR(255)` | ‚ùå N√£o | ‚ùå N√£o | E-mail √∫nico do usu√°rio |
| `password`    | `HASH` (opcional) | ‚úÖ Sim | ‚úÖ Sim | Senha criptografada (vazio para usu√°rios SSO) |
| `user_type_id` | `UUID (FK -> user_types.id)` | ‚ùå N√£o | ‚ùå N√£o | Chave estrangeira para `user_types` |
| `date_of_birth` | `DATE` | ‚úÖ Sim | ‚ùå N√£o | Data de nascimento (opcional) |
| `bio`         | `TEXT` | ‚úÖ Sim | ‚úÖ Sim | Descri√ß√£o do usu√°rio |
| `profile_picture` | `VARCHAR(255)` | ‚úÖ Sim | ‚úÖ Sim | URL da imagem de perfil (opcional) |
| `auth_provider` | `ENUM('local', 'google')` | ‚ùå N√£o | ‚ùå N√£o | Indica se a conta foi criada localmente ou via SSO |
| `sso_id`      | `VARCHAR(255)` | ‚úÖ Sim | ‚ùå N√£o | ID √∫nico do usu√°rio no provedor SSO (somente se autenticado via SSO) |
| `created_at`  | `TIMESTAMP`    | ‚ùå N√£o | - | Data de cria√ß√£o |

---

## **3Ô∏è‚É£ Tabela `instrument_types`** (Tipos de Instrumentos)
Esta tabela armazena os diferentes tipos de instrumentos dispon√≠veis no sistema.

| Coluna        | Tipo           | Permite NULL? | Descri√ß√£o |
|--------------|---------------|--------------|-----------|
| `id`        | `UUID` (PK)    | ‚ùå N√£o | Identificador √∫nico |
| `name`      | `VARCHAR(100)` | ‚ùå N√£o | Nome do instrumento (Ex: Viol√£o, Guitarra, Piano) |
| `description` | `TEXT` (opcional) | ‚úÖ Sim | Descri√ß√£o do instrumento |
| `created_at` | `TIMESTAMP`    | ‚ùå N√£o | Data de cria√ß√£o |

---

## **4Ô∏è‚É£ Tabela `user_instruments`** (Instrumentos cadastrados pelos alunos e ONGs)
Esta tabela armazena os instrumentos que os usu√°rios (alunos ou ONGs) adicionam √† plataforma.

| Coluna        | Tipo           | Permite NULL? | Descri√ß√£o |
|--------------|---------------|--------------|-----------|
| `id`        | `UUID` (PK)    | ‚ùå N√£o | Identificador √∫nico |
| `user_id`   | `UUID (FK -> users.id)` | ‚ùå N√£o | Usu√°rio que cadastrou o instrumento |
| `instrument_type_id` | `UUID (FK -> instrument_types.id)` | ‚ùå N√£o | Tipo de instrumento selecionado |
| `color`     | `VARCHAR(50)`  | ‚úÖ Sim | Cor do instrumento (ex: "Marrom", "Preto", "Branco") |
| `brand`     | `VARCHAR(100)` | ‚úÖ Sim | Marca do instrumento (ex: Yamaha, Fender) |
| `description` | `TEXT` (opcional) | ‚úÖ Sim | Descri√ß√£o personalizada do instrumento |
| `is_available` | `BOOLEAN` | ‚ùå N√£o | Indica se o instrumento est√° dispon√≠vel para visualiza√ß√£o na plataforma (ONGs podem disponibilizar) |
| `location`  | `VARCHAR(255)` | ‚úÖ Sim | Local onde o instrumento est√° dispon√≠vel (ONGs) |
| `created_at` | `TIMESTAMP`    | ‚ùå N√£o | Data de cria√ß√£o |

---

## **5Ô∏è‚É£ Tabela `articles`** (Artigos e Conte√∫dos Educacionais)
Esta tabela armazena artigos gerais sobre m√∫sica, aprendizado de instrumentos, t√©cnicas e hist√≥ria musical.

| Coluna        | Tipo            | Permite NULL? | Descri√ß√£o |
|--------------|----------------|--------------|-----------|
| `id`        | `UUID` (PK)     | ‚ùå N√£o | Identificador √∫nico do artigo |
| `title`     | `VARCHAR(255)`  | ‚ùå N√£o | T√≠tulo do artigo |
| `content`   | `JSONB`         | ‚ùå N√£o | Corpo do artigo armazenado em JSON |
| `author_id` | `UUID (FK -> users.id)` | ‚ùå N√£o | Autor do artigo |
| `tags`      | `VARCHAR[]`     | ‚úÖ Sim | Lista de tags associadas ao artigo |
| `is_published` | `BOOLEAN`    | ‚ùå N√£o | Define se o artigo est√° publicado ou em rascunho |
| `created_at` | `TIMESTAMP`    | ‚ùå N√£o | Data de cria√ß√£o |
| `updated_at` | `TIMESTAMP`    | ‚ùå N√£o | √öltima modifica√ß√£o |

---

## **6Ô∏è‚É£ Tabela `article_comments`** (Coment√°rios nos Artigos)
Permite que os usu√°rios interajam com os artigos postando coment√°rios.

| Coluna        | Tipo            | Permite NULL? | Descri√ß√£o |
|--------------|----------------|--------------|-----------|
| `id`        | `UUID` (PK)     | ‚ùå N√£o | Identificador √∫nico do coment√°rio |
| `article_id` | `UUID (FK -> articles.id)` | ‚ùå N√£o | Artigo ao qual o coment√°rio pertence |
| `user_id`   | `UUID (FK -> users.id)` | ‚ùå N√£o | Usu√°rio que fez o coment√°rio |
| `content`   | `TEXT`          | ‚ùå N√£o | Texto do coment√°rio |
| `created_at` | `TIMESTAMP`    | ‚ùå N√£o | Data de cria√ß√£o do coment√°rio |

---

## **7Ô∏è‚É£ Tabela `article_favorites`** (Favoritar Artigos)
Permite que os usu√°rios salvem artigos para acessar depois.

| Coluna        | Tipo            | Permite NULL? | Descri√ß√£o |
|--------------|----------------|--------------|-----------|
| `id`        | `UUID` (PK)     | ‚ùå N√£o | Identificador √∫nico |
| `user_id`   | `UUID (FK -> users.id)` | ‚ùå N√£o | Usu√°rio que favoritou o artigo |
| `article_id` | `UUID (FK -> articles.id)` | ‚ùå N√£o | Artigo que foi favoritado |
| `created_at` | `TIMESTAMP`    | ‚ùå N√£o | Data em que o artigo foi favoritado |
---

## **üìå Estrutura de Aprendizado**

A estrutura de aprendizado foi projetada para oferecer cursos organizados, permitindo que os alunos sigam um fluxo l√≥gico de aprendizado para um instrumento musical espec√≠fico.

---

## **1Ô∏è‚É£ Tabela `learning_paths`** (Cursos Estruturados)

Essa tabela define os cursos dispon√≠veis para aprendizado de instrumentos musicais.

| Coluna        | Tipo            | Permite NULL? | Descri√ß√£o |
|--------------|----------------|--------------|-----------|
| `id`        | `UUID` (PK)     | ‚ùå N√£o | Identificador √∫nico do curso |
| `name`      | `VARCHAR(255)`  | ‚ùå N√£o | Nome do curso (Ex: "Aprendendo Viol√£o do Zero") |
| `description` | `TEXT`         | ‚úÖ Sim | Breve descri√ß√£o do curso |
| `instrument_type_id` | `UUID (FK -> instrument_types.id)` | ‚ùå N√£o | Instrumento ao qual o curso est√° associado |
| `created_at` | `TIMESTAMP`    | ‚ùå N√£o | Data de cria√ß√£o |

---

## **2Ô∏è‚É£ Tabela `lessons`** (Li√ß√µes dentro de um Curso)

Cada **curso (`learning_paths`)** ter√° v√°rias **li√ß√µes (`lessons`)** que o aluno precisa completar.

| Coluna         | Tipo            | Permite NULL? | Descri√ß√£o |
|---------------|----------------|--------------|-----------|
| `id`         | `UUID` (PK)     | ‚ùå N√£o | Identificador √∫nico |
| `learning_path_id` | `UUID (FK -> learning_paths.id)` | ‚ùå N√£o | Curso ao qual essa li√ß√£o pertence |
| `title`      | `VARCHAR(255)`  | ‚ùå N√£o | Nome da li√ß√£o |
| `content`    | `JSONB`         | ‚ùå N√£o | Conte√∫do da li√ß√£o (v√≠deos, texto, exerc√≠cios) |
| `order`      | `INTEGER`       | ‚ùå N√£o | Ordem da li√ß√£o dentro do curso |
| `created_at` | `TIMESTAMP`     | ‚ùå N√£o | Data de cria√ß√£o |

---

## **3Ô∏è‚É£ Tabela `user_learning_progress`** (Progresso do Aluno)

Essa tabela registra **o que cada usu√°rio j√° completou** dentro de um curso.

| Coluna        | Tipo            | Permite NULL? | Descri√ß√£o |
|--------------|----------------|--------------|-----------|
| `id`        | `UUID` (PK)     | ‚ùå N√£o | Identificador √∫nico |
| `user_id`   | `UUID (FK -> users.id)` | ‚ùå N√£o | Usu√°rio que est√° aprendendo |
| `learning_path_id` | `UUID (FK -> learning_paths.id)` | ‚ùå N√£o | Curso que o usu√°rio est√° fazendo |
| `current_lesson_id` | `UUID (FK -> lessons.id)` | ‚úÖ Sim | √öltima li√ß√£o completada |
| `completed` | `BOOLEAN`       | ‚ùå N√£o | Indica se o curso foi conclu√≠do |
| `updated_at` | `TIMESTAMP`    | ‚ùå N√£o | √öltima atualiza√ß√£o do progresso |


---
### **4Ô∏è‚É£ Agendamento de Uso dos Instrumentos (`instrument_bookings`)**
Registra quando um usu√°rio deseja utilizar um instrumento.

| Coluna        | Tipo            | Descri√ß√£o |
|--------------|----------------|-----------|
| `id`        | `UUID` (PK)     | Identificador √∫nico |
| `instrument_id` | `UUID (FK -> instruments.id)` | Instrumento agendado |
| `user_id`   | `UUID (FK -> users.id)` | Usu√°rio que agendou |
| `start_time` | `TIMESTAMP`    | In√≠cio do uso |
| `end_time`   | `TIMESTAMP`    | Fim do uso |
| `status`    | `ENUM('pendente', 'confirmado', 'cancelado')` | Estado do agendamento |

---

### **5Ô∏è‚É£ Notifica√ß√µes (`notifications`)**
Armazena notifica√ß√µes enviadas aos usu√°rios.

| Coluna        | Tipo            | Descri√ß√£o |
|--------------|----------------|-----------|
| `id`        | `UUID` (PK)     | Identificador √∫nico |
| `user_id`   | `UUID (FK -> users.id)` | Usu√°rio destinat√°rio |
| `message`   | `TEXT`          | Conte√∫do da notifica√ß√£o |
| `is_read`   | `BOOLEAN`       | Se foi lida ou n√£o |
| `created_at` | `TIMESTAMP`    | Data de envio |

---

### **6Ô∏è‚É£ Coment√°rios e Feedbacks nos Artigos (`comments`)**
Permite intera√ß√£o dos usu√°rios nos artigos publicados.

| Coluna        | Tipo            | Descri√ß√£o |
|--------------|----------------|-----------|
| `id`        | `UUID` (PK)     | Identificador √∫nico |
| `article_id` | `UUID (FK -> articles.id)` | Artigo relacionado |
| `user_id`   | `UUID (FK -> users.id)` | Autor do coment√°rio |
| `content`   | `TEXT`          | Conte√∫do do coment√°rio |
| `created_at` | `TIMESTAMP`    | Data de cria√ß√£o |

---

### **7Ô∏è‚É£ Logs de Atividade (`activity_logs`)**
Registro de eventos importantes no sistema para auditoria.

| Coluna        | Tipo            | Descri√ß√£o |
|--------------|----------------|-----------|
| `id`        | `UUID` (PK)     | Identificador √∫nico |
| `user_id`   | `UUID (FK -> users.id)` | Usu√°rio que realizou a a√ß√£o |
| `action`    | `VARCHAR(255)`  | Descri√ß√£o da a√ß√£o |
| `timestamp` | `TIMESTAMP`     | Data e hora da a√ß√£o |

---

## **üìå Pr√≥ximos Passos**
Agora que temos a estrutura principal definida, podemos:
- **Revisar e otimizar** para garantir que nada importante foi esquecido.
- **Definir rela√ß√µes e integridade** entre as tabelas.
- **Planejar √≠ndices e otimiza√ß√µes** para melhorar desempenho.

O que acha desse modelo inicial? Alguma entidade ou detalhe que dever√≠amos incluir ou modificar? üöÄ